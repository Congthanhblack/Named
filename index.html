<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPH-SOC // CHUYÊN GIA GIÁM SÁT HỆ THỐNG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            background-color: #000;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
            height: 100vh;
        }

        .cyber-border { border: 1px solid #004411; background: rgba(0, 5, 0, 0.9); }
        
        .glitch-bg {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 255, 0, 0.06));
            background-size: 100% 2px, 3px 100%;
        }

        .terminal-input {
            background: transparent; border: none; outline: none; color: #fff; width: 100%;
            font-family: 'JetBrains Mono', monospace; font-size: 12px;
        }

        .paper-alert {
            background: #fff; color: #000; max-width: 600px; padding: 30px;
            font-family: 'Times New Roman', serif; border: 5px double #cc0000;
            box-shadow: 0 0 50px rgba(255,0,0,0.4);
        }

        .cam-slot {
            position: relative; background: #050505; border: 1px solid #111;
            aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center;
        }

        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }

        #login-layer, #exit-layer {
            background: radial-gradient(circle, #001100 0%, #000 100%);
        }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #004411; }
    </style>
</head>
<body class="p-1 flex flex-col space-y-1">

    <div id="login-layer" class="fixed inset-0 z-[100] flex items-center justify-center">
        <div class="w-[400px] cyber-border p-8 text-center">
            <i class="fas fa-shield-halved text-5xl mb-6 text-green-600"></i>
            <h2 class="text-xl font-bold tracking-widest mb-2 uppercase">Hệ Thống Giám Sát SOC</h2>
            <p class="text-[10px] text-green-800 mb-6 italic">Xác thực dải IP: 14.226.55.184</p>
            
            <div class="space-y-4 text-left">
                <div>
                    <label class="text-[9px] uppercase text-gray-500">Mã định danh (ID)</label>
                    <input type="text" value="ADMIN_HPH_2026" class="w-full bg-black border border-green-900 p-2 text-sm outline-none" readonly>
                </div>
                <div>
                    <label class="text-[9px] uppercase text-gray-500">Mật mã an ninh</label>
                    <input type="password" id="login-pass" class="w-full bg-black border border-green-700 p-2 text-sm outline-none focus:border-green-400" placeholder="••••••••">
                </div>
                <button onclick="handleLogin()" class="w-full bg-green-700 hover:bg-green-600 text-black font-bold py-3 text-xs uppercase transition">
                    Khởi động phiên truy cập
                </button>
            </div>
            <p id="login-err" class="mt-4 text-[10px] text-red-500 font-bold"></p>
        </div>
    </div>

    <div id="exit-layer" class="fixed inset-0 z-[150] hidden flex items-center justify-center">
        <div class="w-[450px] border-2 border-red-600 bg-black p-10 text-center font-mono">
            <i class="fas fa-power-off text-4xl text-red-600 mb-4"></i>
            <h2 class="text-lg text-white font-bold mb-6 uppercase">Phiên truy cập đã kết thúc</h2>
            <div class="text-left text-xs space-y-2 border-y border-red-900/50 py-4 mb-6">
                <div class="flex justify-between"><span>ĐỊA CHỈ IP:</span> <span class="text-white">14.226.55.184</span></div>
                <div class="flex justify-between"><span>KẾT THÚC LÚC:</span> <span id="exit-time" class="text-white">--:--</span></div>
                <div class="flex justify-between"><span>THỜI LƯỢNG:</span> <span id="access-duration" class="text-white">0s</span></div>
                <div class="flex justify-between"><span>NHẬT KÝ ĐÃ GHI:</span> <span id="log-count" class="text-white">0</span></div>
            </div>
            <button onclick="location.reload()" class="px-8 py-2 border border-green-600 text-green-600 uppercase text-xs font-bold">Quay lại màn đăng nhập</button>
        </div>
    </div>

    <div id="main-dashboard" class="hidden flex flex-col h-full space-y-1">
        
        <header class="h-12 cyber-border flex items-center justify-between px-4">
            <div class="flex items-center space-x-4">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Vietnam_Coat_of_Arms.svg" class="h-8">
                <div>
                    <h1 class="text-xs font-bold text-white uppercase tracking-tighter">CCTV-MSS | HỆ THỐNG GIÁM SÁT AN NINH TẬP TRUNG - QUẢN TRỊ VIÊN CẤP CAO (L5)</h1>
                    <p class="text-[8px] text-green-700">TRẠNG THÁI: <span class="text-red-500 blink uppercase font-bold">Phát hiện lỗi phân đoạn hình ảnh (Segment Corruption)</span></p>
                </div>
            </div>
            <div class="text-right flex space-x-4 items-center">
                <div class="text-[10px]">
                    <span class="text-gray-500 uppercase">Hết hạn phiên:</span>
                    <span id="session-timer" class="text-white font-bold text-lg ml-2">30:00</span>
                </div>
                <div class="h-8 w-[1px] bg-green-900 mx-2"></div>
                <button onclick="handleLogout()" class="text-[10px] bg-red-900/40 border border-red-600 px-3 py-1 hover:bg-red-600 text-white font-bold transition flex items-center gap-2">
                    <i class="fas fa-power-off"></i> THIẾT LẬP LẠI
                </button>
            </div>
        </header>

        <div class="flex-1 flex space-x-1 overflow-hidden">
            
            <div class="w-[30%] flex flex-col space-y-1">
                <div class="flex-1 cyber-border p-2 flex flex-col overflow-hidden">
                    <h3 class="text-[10px] font-bold text-green-600 border-b border-green-950 pb-1 mb-2 uppercase">Nhật ký lỗi Server (Real-time)</h3>
                    <div id="log-box" class="flex-1 overflow-y-auto text-[10px] space-y-1 font-mono"></div>
                </div>

                <div class="h-40 cyber-border bg-black flex flex-col">
                    <div class="bg-zinc-900 px-2 py-1 text-[9px] flex justify-between text-gray-500 border-b border-green-900">
                        <span>HPH_CORE_COMMANDER v4.2</span>
                        <span id="live-ping">PING: --ms</span>
                    </div>
                    <div id="terminal-screen" class="flex-1 p-2 text-[11px] overflow-y-auto font-mono text-gray-400">
                        <div>Microsoft Windows [Version 10.0.19045]</div>
                    </div>
                    <div class="p-2 border-t border-green-900 flex">
                        <span class="text-green-500 mr-2">admin@ioc_hph:></span>
                        <input type="text" id="cli-input" class="terminal-input" autocomplete="off">
                    </div>
                </div>
            </div>

            <div class="flex-1 cyber-border grid grid-cols-3 grid-rows-3 gap-1 p-1 bg-black overflow-hidden">
                <script>
                    const camNames = ["CẦU BÍNH", "LẠCH TRAY", "ĐÌNH VŨ", "TÔ HIỆU", "HỒNG BÀNG", "QUÁN TOAN", "ĐỒ SƠN", "THỦY NGUYÊN", "CẦU RÀO 2"];
                    for(let i=0; i<9; i++) {
                        document.write(`
                            <div class="cam-slot glitch-bg group cursor-crosshair" onclick="triggerGovAlert('Truy xuất Camera: ${camNames[i]}')">
                                <div class="absolute inset-0 flex flex-col items-center justify-center z-10 opacity-40">
                                    <i class="fas fa-video-slash text-zinc-600 text-3xl mb-2 group-hover:text-red-600 transition"></i>
                                    <span class="text-[8px] text-zinc-500 font-bold uppercase tracking-widest">Signal Lost: 0x000${i}FC</span>
                                </div>
                                <div class="absolute top-1 left-1 bg-black/80 px-2 py-0.5 text-[8px] border-l border-red-600 text-red-500 font-bold">
                                    CAM_${(i+1).toString().padStart(2,'0')} | ${camNames[i]} [ERROR]
                                </div>
                                <div class="absolute bottom-1 right-2 text-[8px] text-green-900 font-mono">
                                    DATA: ${Math.floor(Math.random()*900)+100}KB/S
                                </div>
                            </div>
                        `);
                    }
                </script>
            </div>
        </div>
    </div>

    <div id="gov-modal" class="fixed inset-0 z-[200] hidden flex items-center justify-center bg-black/90 backdrop-blur-md">
        <div class="paper-alert">
            <div class="flex justify-between border-b-2 border-black pb-2 mb-4">
                <div class="text-[11px] font-bold">SỞ THÔNG TIN VÀ TRUYỀN THÔNG HẢI PHÒNG<br>TRUNG TÂM IOC</div>
                <div class="text-[11px] font-bold text-right">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM<br>Độc lập - Tự do - Hạnh phúc</div>
            </div>
            <h2 class="text-xl font-bold text-center text-red-700 mb-4 uppercase">Cảnh báo truy cập hệ thống mật</h2>
            <p class="text-sm mb-4 leading-relaxed">
                Hệ thống ghi nhận yêu cầu: <strong id="alert-action" class="text-red-600 uppercase"></strong>.<br><br>
                Đây là khu vực dữ liệu thuộc quyền quản lý của Sở TT&TT TP. Hải Phòng. Mọi hành vi tự ý sửa đổi hoặc truy xuất khi chưa có lệnh điều động sẽ bị truy cứu trách nhiệm theo Nghị định 15/2020/NĐ-CP.
            </p>
            <div class="bg-gray-100 p-4 text-[12px] mb-4 border border-gray-300">
                <strong>ĐƠN VỊ CHỦ QUẢN:</strong> SỞ THÔNG TIN VÀ TRUYỀN THÔNG HẢI PHÒNG<br>
                <strong>Địa chỉ:</strong> 62 Võ Thị Sáu, Ngô Quyền, Hải Phòng
            </div>
            <div class="flex justify-end space-x-4">
                <button onclick="closeGovModal()" class="px-6 py-2 border border-gray-400 font-bold text-sm uppercase">Hủy lệnh</button>
                <button onclick="closeGovModal()" class="px-6 py-2 bg-red-700 text-white font-bold text-sm uppercase">Tôi xác nhận ghi Log</button>
            </div>
        </div>
    </div>

    <script>
        let startTime = null;
        let totalLogs = 0;
        const errorPool = [
            "Mất đồng bộ Frame hình ảnh tại Node_",
            "Lỗi 0x0004FC: Image Segment Corruption",
            "Cảnh báo: Phát hiện gói tin lạ từ IP: 10.22.x.x",
            "Lỗi Codec H.265: Buffer Overflow",
            "Cụm Server Cam bị quá tải luồng Metadata",
            "Kết nối máy chủ IOC_CORE_V9: TIMEOUT",
            "Phát hiện xe vượt đèn đỏ tại Lạch Tray (Mã lỗi xử lý ảnh)",
            "Node Đồ Sơn gửi yêu cầu xác thực lại...",
            "Đang tái tạo luồng dữ liệu thô (Raw Data)..."
        ];

        function addLog(msg, type='error') {
            totalLogs++;
            const time = new Date().toLocaleTimeString();
            let color = "text-red-500";
            if(type === 'info') color = "text-green-500";
            if(type === 'user') color = "text-blue-400 font-bold";
            
            const div = document.createElement('div');
            div.className = color;
            div.innerHTML = `<span class="text-gray-600">[${time}]</span> > ${msg}`;
            const logBox = document.getElementById('log-box');
            logBox.appendChild(div);
            logBox.scrollTop = logBox.scrollHeight;
        }

        function handleLogin() {
            const pass = document.getElementById('login-pass').value;
            if(pass.length > 3) {
                document.getElementById('login-layer').style.display = 'none';
                document.getElementById('main-dashboard').classList.remove('hidden');
                startTime = new Date();
                initSystem();
            } else {
                document.getElementById('login-err').innerText = "MẬT MÃ KHÔNG CHÍNH XÁC.";
            }
        }

        function handleLogout() {
            const endTime = new Date();
            const duration = Math.floor((endTime - startTime) / 1000);
            document.getElementById('exit-time').innerText = endTime.toLocaleTimeString();
            document.getElementById('access-duration').innerText = duration + " Giây";
            document.getElementById('log-count').innerText = totalLogs;
            document.getElementById('main-dashboard').classList.add('hidden');
            document.getElementById('exit-layer').classList.remove('hidden');
        }

        function initSystem() {
            addLog("KHỞI ĐỘNG NHÂN KẾT NỐI: 14.226.55.184", 'info');
            addLog("KIỂM TRA CỤM SERVER CAMERA... THẤT BẠI.");
            
            // Nhật ký lỗi tự động nhảy không trùng lặp
            setInterval(() => {
                const randomErr = errorPool[Math.floor(Math.random() * errorPool.length)];
                addLog(randomErr + (Math.floor(Math.random()*90)+10));
            }, 3500);

            // Timer đếm ngược
            let time = 1800;
            setInterval(() => {
                time--;
                const m = Math.floor(time / 60).toString().padStart(2, '0');
                const s = (time % 60).toString().padStart(2, '0');
                document.getElementById('session-timer').innerText = `${m}:${s}`;
            }, 1000);

            // Ping
            setInterval(() => {
                const p = Math.floor(Math.random() * 20) + 5;
                document.getElementById('live-ping').innerText = `PING: ${p}ms`;
            }, 2000);
        }

        document.getElementById('cli-input').addEventListener('keydown', (e) => {
            if(e.key === 'Enter') {
                const val = e.target.value.trim();
                if(!val) return;

                // Hiện ở Terminal
                const line = document.createElement('div');
                line.innerHTML = `<span class="text-green-500">admin@ioc_hph:></span> ${val}`;
                document.getElementById('terminal-screen').appendChild(line);

                // ĐỒNG BỘ LÊN NHẬT KÝ LỖI
                addLog(`[USER_ACTION]: Thực thi '${val}'`, 'user');

                if(val.toLowerCase().startsWith('ping')) {
                    const target = val.split(' ')[1] || '14.226.55.1';
                    for(let i=0; i<3; i++) {
                        setTimeout(() => {
                            const p = document.createElement('div');
                            p.innerText = `Reply from ${target}: bytes=32 time=${Math.floor(Math.random()*15)+5}ms`;
                            document.getElementById('terminal-screen').appendChild(p);
                            document.getElementById('terminal-screen').scrollTop = document.getElementById('terminal-screen').scrollHeight;
                        }, (i+1) * 500);
                    }
                }
                e.target.value = '';
                document.getElementById('terminal-screen').scrollTop = document.getElementById('terminal-screen').scrollHeight;
            }
        });

        function triggerGovAlert(action) {
            document.getElementById('alert-action').innerText = action;
            document.getElementById('gov-modal').classList.remove('hidden');
        }

        function closeGovModal() {
            document.getElementById('gov-modal').classList.add('hidden');
        }
    </script>
</body>
</html>
