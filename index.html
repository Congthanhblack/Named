<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPH-SOC // HỆ THỐNG GIÁM SÁT TẬP TRUNG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Times+New+Roman:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; color: #00ff41; font-family: 'JetBrains Mono', monospace; overflow: hidden; height: 100vh; width: 100vw; margin: 0; }
        
        .cyber-border { 
            border: 1px solid #004411; 
            background: rgba(0, 10, 0, 0.95); 
            box-shadow: 0 0 5px rgba(0, 255, 65, 0.1);
        }

        /* GRID FIX: Cố định 4 cột và 3 hàng */
        .camera-container-grid {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
            grid-template-rows: repeat(3, 1fr) !important;
            gap: 6px;
            width: 100%;
            height: 100%;
        }

        .cam-slot {
            position: relative;
            background: #000;
            border: 1px solid #112211;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .glitch-bg { background: repeating-linear-gradient(0deg, transparent, transparent 2px, #001100 2px, #001100 4px); }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #001100; }
        ::-webkit-scrollbar-thumb { background: #004411; }

        .gov-paper {
            background: #fff; color: #000; font-family: 'Times New Roman', serif;
            max-width: 700px; width: 90%; padding: 40px;
            border: 6px double #b91c1c; box-shadow: 0 0 100px rgba(0,0,0,0.9);
        }

        .blink { animation: blinker 1.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
        
        .tab-btn {
            background: #001100; border: 1px solid #004411; color: #006622;
            transition: all 0.2s; font-size: 11px; font-weight: bold;
        }
        .tab-btn.active { background: #004411; color: #fff; border-color: #00ff41; }

        /* Hiệu ứng nhiễu cho ô trống */
        .no-signal-bg {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
        }
    </style>
</head>
<body class="flex flex-col h-full select-none">

    <div id="login-layer" class="fixed inset-0 z-[100] flex items-center justify-center bg-black">
        <div class="w-[450px] cyber-border p-10 text-center">
            <i class="fas fa-fingerprint text-6xl mb-6 text-green-700"></i>
            <h2 class="text-2xl font-bold mb-8 text-white uppercase tracking-widest">An Ninh HPH-SOC</h2>
            <input type="password" id="login-pass" class="w-full bg-black border border-green-800 p-3 text-white mb-5 outline-none text-center" placeholder="MẬT MÃ TRUY CẬP">
            <button onclick="handleLogin()" class="w-full bg-green-900 hover:bg-green-700 text-white py-3 font-bold uppercase transition-colors">Kết nối hệ thống</button>
            <p id="login-err" class="mt-4 text-red-500 text-xs h-4"></p>
        </div>
    </div>

    <div id="main-dashboard" class="hidden flex flex-col h-full p-2 gap-2">
        
        <header class="h-14 shrink-0 cyber-border flex items-center justify-between px-6">
            <div class="flex items-center gap-4">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Vietnam_Coat_of_Arms.svg" class="h-10">
                <div>
                    <h1 class="text-sm font-bold text-white leading-tight">HỆ THỐNG GIÁM SÁT AN NINH THÔNG MINH (IOC)</h1>
                    <p class="text-[10px] text-green-700 font-bold">TRUNG TÂM ĐIỀU HÀNH TẬP TRUNG THÀNH PHỐ HẢI PHÒNG</p>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="text-right hidden md:block">
                    <p class="text-[9px] text-gray-500">SESSION EXPIRES IN</p>
                    <div id="session-timer" class="text-xl font-bold text-white font-mono leading-none">30:00</div>
                </div>
                <i class="fas fa-shield-halved text-2xl text-green-600"></i>
            </div>
        </header>

        <div class="flex-1 flex gap-2 overflow-hidden min-h-0">
            
            <div class="w-[280px] flex flex-col gap-2 shrink-0 h-full">
                <div class="flex-1 cyber-border flex flex-col overflow-hidden min-h-0">
                    <div class="bg-green-900/20 p-2 border-b border-green-900 text-[10px] font-bold flex justify-between">
                        <span>NHẬT KÝ HỆ THỐNG</span>
                        <span class="blink">● REC</span>
                    </div>
                    <div id="log-box" class="flex-1 overflow-y-auto p-2 text-[10px] font-mono text-gray-400"></div>
                </div>
                <div class="h-[180px] cyber-border flex flex-col bg-black overflow-hidden">
                    <div id="terminal-screen" class="flex-1 p-2 text-[10px] font-mono text-gray-600 overflow-y-auto italic">
                        --- KHỞI TẠO TERMINAL ---<br>
                        Ready for command...
                    </div>
                    <div class="p-2 border-t border-green-900 flex items-center bg-zinc-950">
                        <span class="text-green-500 mr-2">></span>
                        <input type="text" id="cli-input" class="bg-transparent outline-none text-white text-[11px] w-full font-mono" placeholder="...">
                    </div>
                </div>
            </div>

            <div class="flex-1 flex flex-col gap-2 h-full min-w-0">
                <div class="h-10 shrink-0 cyber-border flex items-center px-1 gap-1 bg-black/50">
                    <button class="tab-btn active flex-1 h-8 uppercase" onclick="switchTab('ALL', this)">Toàn Thành Phố</button>
                    <button class="tab-btn flex-1 h-8 uppercase" onclick="switchTab('CORE', this)">Quận Nội Thành</button>
                    <button class="tab-btn flex-1 h-8 uppercase" onclick="switchTab('SUBURB', this)">Huyện Ngoại Thành</button>
                    <button class="tab-btn flex-1 h-8 uppercase" onclick="switchTab('PORT', this)">Cảng & Công Nghiệp</button>
                </div>

                <div class="flex-1 cyber-border bg-black p-1.5 overflow-hidden">
                    <div id="camera-grid" class="camera-container-grid">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="gov-modal" class="fixed inset-0 z-[200] hidden flex items-center justify-center bg-black/95">
        <div class="gov-paper animate-pulse">
            <h1 class="text-3xl font-bold text-center text-red-700 mb-2">CẢNH BÁO TRUY CẬP</h1>
            <p class="text-center text-sm mb-6 border-b pb-4 border-red-200 uppercase tracking-tighter">Hành động này yêu cầu quyền xác thực cấp độ 4</p>
            <p id="alert-content" class="mb-8 text-center px-4 font-bold text-xl italic"></p>
            <div class="flex justify-center gap-6">
                <button onclick="closeGovModal()" class="px-10 py-3 border-2 border-black font-bold hover:bg-black hover:text-white transition-all">HỦY LỆNH</button>
                <button onclick="closeGovModal()" class="px-10 py-3 bg-red-700 text-white font-bold shadow-lg">XÁC NHẬN</button>
            </div>
        </div>
    </div>

    <script>
        const cameraData = [
            { id: "01", name: "CẦU BÍNH (HỒNG BÀNG)", cat: "CORE" },
            { id: "02", name: "NHÀ HÁT LỚN", cat: "CORE" },
            { id: "03", name: "NGÃ 6 LẠCH TRAY", cat: "CORE" },
            { id: "04", name: "CẦU RÀO 2", cat: "CORE" },
            { id: "05", name: "NÚI ĐÈO (THỦY NGUYÊN)", cat: "SUBURB" },
            { id: "06", name: "THỊ TRẤN AN DƯƠNG", cat: "SUBURB" },
            { id: "07", name: "CẦU KHUỂ (AN LÃO)", cat: "SUBURB" },
            { id: "08", name: "THỊ TRẤN TIÊN LÃNG", cat: "SUBURB" },
            { id: "09", name: "CẢNG ĐÌNH VŨ (HẢI AN)", cat: "PORT" },
            { id: "10", name: "KCN VSIP", cat: "PORT" },
            { id: "11", name: "CẢNG LẠCH HUYỆN", cat: "PORT" },
            { id: "12", name: "KDL ĐỒ SƠN", cat: "PORT" }
        ];

        window.currentTab = 'ALL';

        function createCameraGrid() {
            const grid = document.getElementById('camera-grid');
            grid.innerHTML = '';
            
            // Lọc dữ liệu theo Tab
            const filtered = window.currentTab === 'ALL' 
                ? cameraData 
                : cameraData.filter(c => c.cat === window.currentTab);

            // LUÔN TẠO ĐỦ 12 Ô (3 hàng x 4 cột)
            for (let i = 0; i < 12; i++) {
                const cam = filtered[i];
                const div = document.createElement('div');
                
                if (cam) {
                    // Ô CÓ DỮ LIỆU
                    div.className = "cam-slot group cursor-pointer hover:border-green-400";
                    div.onclick = () => triggerGovAlert(`TRUY XUẤT DỮ LIỆU CAMERA: ${cam.name}`);
                    div.innerHTML = `
                        <div class="absolute inset-0 glitch-bg opacity-10"></div>
                        <div class="p-1.5 flex justify-between items-start z-10">
                            <span class="text-[9px] bg-red-700 text-white px-1 font-bold blink">LIVE</span>
                            <span class="text-[8px] text-gray-500 font-mono">NODE_${cam.id}</span>
                        </div>
                        <div class="flex-1 flex items-center justify-center opacity-20 group-hover:opacity-100 transition-opacity">
                            <i class="fas fa-video text-3xl text-green-500"></i>
                        </div>
                        <div class="p-1.5 bg-black/80 border-t border-green-900/30 z-10">
                            <div class="text-[9px] text-green-400 font-bold truncate uppercase tracking-tighter">${cam.name}</div>
                        </div>
                    `;
                } else {
                    // Ô TRỐNG (NO SIGNAL) ĐỂ GIỮ BỐ CỤC 3x4
                    div.className = "cam-slot no-signal-bg border-dashed border-green-900/20 opacity-40";
                    div.innerHTML = `
                        <div class="flex-1 flex flex-col items-center justify-center grayscale">
                            <i class="fas fa-video-slash text-xl mb-1 text-gray-600"></i>
                            <span class="text-[8px] font-mono text-gray-600">SIGNAL LOST</span>
                        </div>
                    `;
                }
                grid.appendChild(div);
            }
        }

        function switchTab(cat, btn) {
            window.currentTab = cat;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            createCameraGrid();
            addLog(`HỆ THỐNG: Chuyển vùng giám sát mục tiêu [${cat}]`, 'info');
        }

        function addLog(msg, type='info') {
            const box = document.getElementById('log-box');
            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('vi-VN', {hour12: false});
            div.className = "mb-1 leading-tight";
            div.innerHTML = `<span class="text-green-900">[${time}]</span> <span class="${type==='error'?'text-red-600':'text-green-600'}">> ${msg}</span>`;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }

        function handleLogin() {
            const pass = document.getElementById('login-pass').value;
            if(pass.length > 0) {
                document.getElementById('login-layer').style.display = 'none';
                document.getElementById('main-dashboard').classList.remove('hidden');
                createCameraGrid();
                addLog("Xác thực quản trị viên: CẤP ĐỘ 1 - THÀNH CÔNG", 'info');
                startClock();
            } else {
                document.getElementById('login-err').innerText = "VUI LÒNG NHẬP MẬT MÃ TRUY CẬP.";
            }
        }

        function startClock() {
            let t = 1800;
            setInterval(() => {
                t--;
                const m = Math.floor(t/60);
                const s = t%60;
                document.getElementById('session-timer').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }, 1000);
        }

        function triggerGovAlert(msg) {
            document.getElementById('alert-content').innerText = msg;
            document.getElementById('gov-modal').classList.remove('hidden');
            addLog(`CẢNH BÁO: Truy cập cơ sở dữ liệu nhạy cảm - ${msg}`, 'error');
        }

        function closeGovModal() {
            document.getElementById('gov-modal').classList.add('hidden');
        }

        // CLI Fake Input
        document.getElementById('cli-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                addLog(`USER_CMD: ${this.value}`, 'info');
                this.value = '';
            }
        });
    </script>
</body>
</html>
