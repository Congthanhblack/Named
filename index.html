<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPH-SOC // HỆ THỐNG GIÁM SÁT TẬP TRUNG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Times+New+Roman:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; color: #00ff41; font-family: 'JetBrains Mono', monospace; overflow: hidden; height: 100vh; width: 100vw; }
        
        .cyber-border { 
            border: 1px solid #004411; 
            background: rgba(0, 10, 0, 0.95); 
            box-shadow: 0 0 5px rgba(0, 255, 65, 0.1);
        }
        
        .glitch-bg { 
            background: repeating-linear-gradient(0deg, transparent, transparent 2px, #001100 2px, #001100 4px);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #001100; }
        ::-webkit-scrollbar-thumb { background: #004411; border-radius: 2px; }

        /* GRID CHUẨN IOC */
        .camera-grid-layout {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
            grid-template-rows: repeat(3, 1fr) !important;
            gap: 6px;
        }

        .cam-slot {
            position: relative;
            background: #000;
            border: 1px solid #112211;
            aspect-ratio: 16 / 9; /* Tỷ lệ khung hình chuyên nghiệp */
            overflow: hidden;
            transition: all 0.2s;
        }
        .cam-slot:hover { border-color: #00ff41; z-index: 10; transform: scale(1.01); }

        .gov-paper {
            background: #fff; color: #000; font-family: 'Times New Roman', serif;
            max-width: 700px; width: 90%; padding: 40px;
            border: 6px double #b91c1c; box-shadow: 0 0 100px rgba(0,0,0,0.9);
            position: relative;
        }

        .blink { animation: blinker 1.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
        
        .tab-btn {
            background: #001100; border: 1px solid #004411; color: #006622;
            transition: all 0.2s; font-size: 11px; text-transform: uppercase; font-weight: bold;
        }
        .tab-btn.active { background: #004411; color: #fff; border-color: #00ff41; }

        .no-signal-overlay {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
        }
    </style>
</head>
<body class="flex flex-col h-full select-none">

    <div id="login-layer" class="fixed inset-0 z-[100] flex items-center justify-center bg-black">
        <div class="w-[450px] cyber-border p-10 text-center relative">
            <div class="absolute top-0 left-0 w-full h-1 bg-green-600"></div>
            <i class="fas fa-fingerprint text-6xl mb-6 text-green-700"></i>
            <h2 class="text-2xl font-bold tracking-widest mb-2 uppercase text-white">Cổng An Ninh HPH-SOC</h2>
            <p class="text-[11px] text-green-800 mb-8 italic">Vui lòng xác thực danh tính quản trị viên cấp 5</p>
            <div class="space-y-5 text-left">
                <div>
                    <label class="text-[9px] uppercase text-gray-500 tracking-wider">Mã định danh thiết bị</label>
                    <div class="text-xs text-green-500 font-bold border-b border-green-900 py-1">TERMINAL_ID: 84-HP-15A</div>
                </div>
                <div>
                    <label class="text-[9px] uppercase text-gray-500 tracking-wider">Mật mã truy cập</label>
                    <input type="password" id="login-pass" class="w-full bg-black border border-green-800 p-3 text-sm text-white outline-none focus:border-green-500 transition" placeholder="••••••••••">
                </div>
                <button onclick="handleLogin()" class="w-full bg-green-800 hover:bg-green-700 text-white font-bold py-3 text-xs uppercase transition tracking-widest border border-green-600">
                    <i class="fas fa-unlock mr-2"></i> Kết nối hệ thống
                </button>
            </div>
            <p id="login-err" class="mt-4 text-[10px] text-red-500 font-bold h-4"></p>
        </div>
    </div>

    <div id="main-dashboard" class="hidden flex flex-col h-full p-1 gap-1 bg-black">
        
        <header class="h-14 shrink-0 cyber-border flex items-center justify-between px-6 bg-zinc-900/50">
            <div class="flex items-center gap-4">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/af/Vietnam_Coat_of_Arms.svg" class="h-10 drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]">
                <div>
                    <h1 class="text-sm font-bold text-white uppercase tracking-wider">Hệ Thống Giám Sát An Ninh Thông Minh (IOC)</h1>
                    <div class="flex items-center gap-2 text-[10px]">
                        <span class="text-gray-400">KHU VỰC: HẢI PHÒNG</span>
                        <span class="text-green-600">|</span>
                        <span class="text-green-500 font-bold">TRẠNG THÁI: TRỰC TUYẾN</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="text-right">
                    <div class="text-[9px] text-gray-400 uppercase">Thời gian phiên</div>
                    <div id="session-timer" class="text-xl font-bold text-white font-mono">00:00</div>
                </div>
                <button onclick="location.reload()" class="bg-red-900/30 border border-red-600 text-red-500 px-4 py-2 text-[10px] font-bold uppercase hover:bg-red-900/60 transition">
                    <i class="fas fa-power-off mr-1"></i> Ngắt kết nối
                </button>
            </div>
        </header>

        <div class="flex-1 flex gap-1 overflow-hidden min-h-0">
            
            <div class="w-[30%] min-w-[300px] max-w-[400px] flex flex-col gap-1 shrink-0 h-full">
                <div class="flex-1 cyber-border flex flex-col overflow-hidden min-h-0 relative">
                    <div class="bg-green-900/20 p-2 border-b border-green-900 flex justify-between items-center shrink-0">
                        <h3 class="text-[10px] font-bold text-green-400 uppercase"><i class="fas fa-list-ul mr-1"></i> Nhật ký hệ thống</h3>
                        <span class="text-[9px] text-green-700 animate-pulse">● LIVE LOG</span>
                    </div>
                    <div id="log-box" class="flex-1 overflow-y-auto p-2 text-[10px] space-y-1.5 font-mono text-gray-300"></div>
                </div>

                <div class="h-1/3 min-h-[150px] cyber-border flex flex-col bg-black shrink-0">
                    <div class="bg-zinc-800 p-1 text-[9px] text-gray-400 text-center border-b border-gray-700">COMMAND_LINE_INTERFACE v2.4</div>
                    <div id="terminal-screen" class="flex-1 p-2 text-[10px] font-mono text-gray-500 overflow-y-auto">
                        <div class="text-green-600">root@ioc_haiphong:~# init_sequence_start</div>
                    </div>
                    <div class="p-2 border-t border-green-900 flex items-center bg-zinc-900 shrink-0">
                        <span class="text-green-500 text-[11px] font-bold mr-2">></span>
                        <input type="text" id="cli-input" class="bg-transparent border-none outline-none text-white text-[11px] w-full font-mono" placeholder="Nhập lệnh điều khiển..." autocomplete="off">
                    </div>
                </div>
            </div>

            <div class="flex-1 flex flex-col gap-1 h-full min-w-0">
                <div class="h-10 shrink-0 cyber-border flex items-center px-1 gap-1 bg-black">
                    <button class="tab-btn active px-4 py-1.5 h-full flex-1" onclick="switchTab('ALL', this)">
                        <i class="fas fa-globe mr-1"></i> Toàn Thành Phố
                    </button>
                    <button class="tab-btn px-4 py-1.5 h-full flex-1" onclick="switchTab('CORE', this)">
                        <i class="fas fa-city mr-1"></i> Q. Nội Thành
                    </button>
                    <button class="tab-btn px-4 py-1.5 h-full flex-1" onclick="switchTab('SUBURB', this)">
                        <i class="fas fa-tree mr-1"></i> H. Ngoại Thành
                    </button>
                    <button class="tab-btn px-4 py-1.5 h-full flex-1" onclick="switchTab('PORT', this)">
                        <i class="fas fa-ship mr-1"></i> Cảng & CN
                    </button>
                </div>

                <div class="flex-1 cyber-border bg-[#050505] p-1 overflow-hidden">
                    <div id="camera-grid" class="camera-grid-layout h-full">
                        </div>
                </div>
                
                <div class="h-6 shrink-0 cyber-border flex items-center justify-between px-2 text-[9px] bg-zinc-900">
                    <div class="flex gap-4">
                        <span class="text-gray-500">CPU: <span class="text-white">14%</span></span>
                        <span class="text-gray-500">RAM: <span class="text-white">8.2GB / 32GB</span></span>
                        <span class="text-gray-500">NETWORK: <span class="text-green-400">1.2 Gbps</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="gov-modal" class="fixed inset-0 z-[200] hidden flex items-center justify-center bg-black/95 backdrop-blur-sm">
        <div class="gov-paper">
            <div class="flex justify-between items-start border-b-2 border-red-800 pb-4 mb-6">
                <div class="text-center w-1/2">
                    <h3 class="text-[11px] font-bold uppercase mb-1">UBND THÀNH PHỐ HẢI PHÒNG</h3>
                    <h2 class="text-[12px] font-bold uppercase text-red-800">SỞ THÔNG TIN VÀ TRUYỀN THÔNG</h2>
                    <div class="w-1/3 h-[1px] bg-gray-400 mx-auto mt-1"></div>
                </div>
                <div class="text-center w-1/2">
                    <h3 class="text-[11px] font-bold uppercase mb-1">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h3>
                    <h2 class="text-[12px] font-bold uppercase underline underline-offset-4">Độc lập - Tự do - Hạnh phúc</h2>
                </div>
            </div>
            
            <h1 class="text-xl font-bold text-center text-red-700 mb-6 uppercase tracking-wider">LỆNH TRUY XUẤT DỮ LIỆU KHẨN CẤP</h1>
            
            <div class="text-[15px] leading-relaxed mb-6 px-4">
                <p class="mb-3"><strong>Đối tượng:</strong> <span id="alert-cam-name" class="text-red-700 font-bold uppercase"></span></p>
                <p class="mb-3"><strong>Địa chỉ thực tế:</strong> <span id="alert-address" class="italic underline text-gray-800"></span></p>
                <p class="text-justify">Hành động này yêu cầu quyền xác thực cấp độ cao nhất. Mọi hành vi truy xuất, sao chép hoặc phát tán dữ liệu tại điểm giám sát này đều được ghi nhật ký và báo cáo trực tiếp về <strong>Trung tâm Điều hành tập trung (IOC)</strong> theo quy định của pháp luật.</p>
            </div>

            <div class="bg-gray-50 p-4 border border-gray-200 text-[13px] mb-8 mx-4">
                <p class="mb-1 font-bold text-red-800 uppercase italic underline">Căn cứ pháp lý:</p>
                <p>Nghị định số 13/2023/NĐ-CP về bảo vệ dữ liệu cá nhân và Luật An ninh mạng số 24/2018/QH14.</p>
            </div>

            <div class="flex justify-center gap-4 border-t pt-6 border-gray-300">
                <button onclick="closeGovModal()" class="px-6 py-2 border border-gray-400 font-bold text-sm uppercase text-gray-600 hover:bg-gray-100 transition min-w-[120px]">Hủy Lệnh</button>
                <button onclick="closeGovModal()" class="px-6 py-2 bg-red-700 text-white font-bold text-sm uppercase shadow-lg hover:bg-red-800 transition min-w-[150px]">Xác nhận ghi Log</button>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'ALL';
        let failingNode = null;

        const cameraData = [
            { id: "C01", name: "CẦU BÍNH", addr: "Số 1 đường Bạch Đằng, P. Thượng Lý, Q. Hồng Bàng, Hải Phòng", node: "NODE_ALPHA", cat: "CORE" },
            { id: "C02", name: "NHÀ HÁT LỚN", addr: "Số 28 phố Quang Trung, P. Hoàng Văn Thụ, Q. Hồng Bàng, Hải Phòng", node: "NODE_ALPHA", cat: "CORE" },
            { id: "C03", name: "NGÃ 6 LẠCH TRAY", addr: "Giao lộ Lạch Tray - Nguyễn Bỉnh Khiêm, Q. Ngô Quyền, Hải Phòng", node: "NODE_ALPHA", cat: "CORE" },
            { id: "C04", name: "CẦU RÀO 2", addr: "Đường Võ Nguyên Giáp, P. Vĩnh Niệm, Q. Lê Chân, Hải Phòng", node: "NODE_ALPHA", cat: "CORE" },
            { id: "S01", name: "NÚI ĐÈO", addr: "Thị trấn Núi Đèo, huyện Thủy Nguyên, Hải Phòng", node: "NODE_BETA", cat: "SUBURB" },
            { id: "S02", name: "T.T AN DƯƠNG", addr: "Đường 351, huyện An Dương, Hải Phòng", node: "NODE_BETA", cat: "SUBURB" },
            { id: "S03", name: "CẦU KHUỂ", addr: "Tỉnh lộ 354, huyện An Lão, Hải Phòng", node: "NODE_BETA", cat: "SUBURB" },
            { id: "S04", name: "T.T TIÊN LÃNG", addr: "Khu phố huyện, huyện Tiên Lãng, Hải Phòng", node: "NODE_BETA", cat: "SUBURB" },
            { id: "P01", name: "CẢNG ĐÌNH VŨ", addr: "Khu kinh tế Đình Vũ, Q. Hải An, Hải Phòng", node: "NODE_GAMMA", cat: "PORT" },
            { id: "P02", name: "KCN VSIP", addr: "Xã Tân Dương, huyện Thủy Nguyên, Hải Phòng", node: "NODE_GAMMA", cat: "PORT" },
            { id: "P03", name: "CẢNG LẠCH HUYỆN", addr: "Đảo Cát Hải, huyện Cát Hải, Hải Phòng", node: "NODE_GAMMA", cat: "PORT" },
            { id: "P04", name: "KDL ĐỒ SƠN", addr: "Khu 2, Vạn Hương, Q. Đồ Sơn, Hải Phòng", node: "NODE_GAMMA", cat: "PORT" }
        ];

        function createCameraGrid() {
            const grid = document.getElementById('camera-grid');
            grid.innerHTML = '';
            
            const filtered = currentTab === 'ALL' ? cameraData : cameraData.filter(c => c.cat === currentTab);

            // LUÔN TẠO 12 Ô
            for (let i = 0; i < 12; i++) {
                const cam = filtered[i];
                const div = document.createElement('div');
                div.className = "cam-slot group cursor-crosshair";
                
                if (cam) {
                    const isFailing = cam.node === failingNode;
                    div.onclick = () => triggerGovAlert(cam);
                    div.innerHTML = `
                        <div class="absolute inset-0 glitch-bg opacity-10"></div>
                        <div class="absolute inset-0 z-20 bg-red-900/40 backdrop-blur-sm flex flex-col items-center justify-center ${isFailing ? '' : 'hidden'}">
                            <i class="fas fa-triangle-exclamation text-2xl text-red-500 blink mb-1"></i>
                            <span class="text-[8px] text-red-100 font-bold uppercase">Mất tín hiệu máy chủ</span>
                        </div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center opacity-20">
                            <i class="fas fa-video text-3xl text-green-900"></i>
                        </div>
                        <div class="absolute top-2 left-2 flex flex-col z-10">
                            <span class="bg-red-700 text-white text-[7px] px-1 font-bold mb-1 w-max flex items-center gap-1">
                                <span class="w-1 h-1 bg-white rounded-full blink"></span> LIVE
                            </span>
                            <span class="text-[8px] text-green-500 font-bold uppercase border-l border-green-500 pl-1">${cam.name}</span>
                        </div>
                        <div class="absolute bottom-1 right-1 text-[7px] text-zinc-600 font-mono z-10">${cam.id} | 1080p</span></div>
                    `;
                } else {
                    div.className = "cam-slot no-signal-overlay opacity-30";
                    div.innerHTML = `
                        <div class="absolute inset-0 flex flex-col items-center justify-center grayscale">
                            <i class="fas fa-video-slash text-xl mb-1 text-gray-700"></i>
                            <span class="text-[7px] font-bold text-gray-700 uppercase">No Signal</span>
                        </div>
                    `;
                }
                grid.appendChild(div);
            }
        }

        function triggerGovAlert(cam) {
            document.getElementById('alert-cam-name').innerText = cam.name;
            document.getElementById('alert-address').innerText = cam.addr;
            document.getElementById('gov-modal').classList.remove('hidden');
            addLog(`CẢNH BÁO BẢO MẬT: Truy xuất dữ liệu tại ${cam.id}`, 'error');
        }

        function switchTab(cat, btn) {
            currentTab = cat;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            createCameraGrid();
            addLog(`HỆ THỐNG: Chuyển vùng giám sát [${cat}]`, 'info');
        }

        function addLog(msg, type='info') {
            const box = document.getElementById('log-box');
            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('vi-VN', {hour12: false});
            let color = "text-green-500";
            if (type === 'error') color = "text-red-500 font-bold";
            div.className = "flex gap-2 p-0.5";
            div.innerHTML = `<span class="text-gray-600 shrink-0">[${time}]</span><span class="${color}">${msg}</span>`;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }

        function handleLogin() {
            if(document.getElementById('login-pass').value.length > 0) {
                document.getElementById('login-layer').style.display = 'none';
                document.getElementById('main-dashboard').classList.remove('hidden');
                initSystem();
            } else { document.getElementById('login-err').innerText = "SAI MẬT MÃ TRUY CẬP."; }
        }

        function initSystem() {
            createCameraGrid();
            let time = 1800;
            setInterval(() => {
                time--;
                const m = Math.floor(time / 60).toString().padStart(2, '0');
                const s = (time % 60).toString().padStart(2, '0');
                document.getElementById('session-timer').innerText = `${m}:${s}`;
            }, 1000);
            addLog("Hệ thống khởi động thành công. Đang tải luồng dữ liệu...", 'info');
        }

        function closeGovModal() { document.getElementById('gov-modal').classList.add('hidden'); }

        document.getElementById('cli-input').addEventListener('keydown', (e) => {
            if(e.key === 'Enter' && e.target.value) {
                const line = document.createElement('div');
                line.className = "text-white";
                line.innerHTML = `<span class="text-green-500">root@ioc_haiphong:~#</span> ${e.target.value}`;
                document.getElementById('terminal-screen').appendChild(line);
                addLog(`Lệnh: ${e.target.value}`, 'info');
                e.target.value = '';
                document.getElementById('terminal-screen').scrollTop = document.getElementById('terminal-screen').scrollHeight;
            }
        });
    </script>
</body>
</html>
